(()=>{"use strict";function e(e){var t=document.querySelector(e.toggler),s=t.hasAttribute("checked"),c=document.querySelector(e.target);s&&c.classList.toggle("hidden"),t.addEventListener("click",(function(){c.classList.toggle("hidden")}))}function t(e){var t=document.querySelector(e.button),s=document.querySelector(e.target);t.addEventListener("click",(function(){""!==s.value&&confirm("Are you sure?")&&(s.value="")}))}function s(e){var t=document.querySelector(e.select);t.addEventListener("click",(function(s){var c;s.preventDefault(),c&&c.open(),(c=wp.media({title:"Select Featured Images",multiple:e.is_multiple,library:{type:"image"},button:{text:"Select"}})).on("close",(function(){var s=t.closest("#wdss-featured-images-list"),i=c.state().get("selection"),n=new Array,o=new Array,d=0;if(s){i.forEach((function(e){n[d]=e.id,d++}));var l=n.join(",");document.querySelector(e.target).value=l}else{i.forEach((function(e){o[d]=e.attributes.url,d++}));var r=o.join(",");document.querySelector(e.target).value=r}})),c.on("open",(function(){var t=c.state().get("selection");document.querySelector(e.target).value.split(",").forEach((function(e){var s=wp.media.attachment(e);s.fetch(),t.add(s?[s]:[])}))})),c.open()}))}function c(){var e=document.querySelector("#wdss-title-clipping-excluded__choose"),t=document.querySelector("#wdss-title-clipping-excluded");function s(e){var t=document.querySelector("html");t.classList.add("fixed"),this.insertAdjacentHTML("beforeend",e),Array.from(document.querySelectorAll(".wdss-table-row.post")).forEach((function(e){e.addEventListener("click",(function(){var t=e.querySelector('.wdss-table-post__select input[type="checkbox"]');t.hasAttribute("checked")?function(e){e.removeAttribute("checked"),e.checked=!1}(t):function(e){e.setAttribute("checked","checked"),e.checked=!0}(t)}))}));var s=this.querySelector(".wdss-modal"),c=s.querySelector(".wdss-modal-header i"),i=s.querySelector(".wdss-button.submit"),n=this.querySelector('#wdss-title-clipping-excluded input[type="text"]');if(""!==n.value){var o=n.value.split(",");Array.from(s.querySelectorAll('.wdss-table-post__select input[type="checkbox"]')).forEach((function(e){o.includes(e.value)&&(e.setAttribute("checked","checked"),e.checked=!0)}))}function d(){s.remove(),t.classList.remove("fixed")}c.addEventListener("click",d),document.onkeydown=function(e){"Esc"!==e.key&&"Escape"!==e.key||d()},i.addEventListener("click",(function(){var e=s.querySelectorAll('.wdss-table-post__select input[type="checkbox"]:checked');console.log(e);var c,i=[];e.forEach((function(e){i.push(e.value)})),c=i.join(","),n.value=c,s.remove(),t.classList.remove("fixed")}))}e.addEventListener("click",(function(){jQuery.ajax({url:wdss_localize.url,type:"post",data:{action:"fetch_modal_content",security:wdss_localize.nonce},success:function(e){s.call(t,e)}})}))}var i=document.querySelector("#wdss-settings-page"),n={toggler:"#wdss-title-clipping-condition input",target:"#wdss-title-clipping-group"},o={toggler:"#wdss-auto-featured-image-condition input",target:"#wdss-featured-images-group"},d={toggler:"#wdss-advanced-jsonld-schema-condition input",target:"#wdss-advanced-jsonld-schema-group"},l={toggler:"#wdss-polylang-meta-data-condition input",target:"#wdss-polylang-meta-data-group"},r={button:"#wdss-title-clipping-excluded button.reset",target:"#wdss-title-clipping-excluded input"},a={button:"#wdss-title-clipping-by-date button.reset",target:"#wdss-title-clipping-by-date input"},u={button:"#wdss-featured-images-group button.reset",target:"#wdss-featured-images-group input"},g={button:"#wdss-jsonld-schema-logo button.reset",target:"#wdss-jsonld-schema-logo input"},p={select:"#wdss-featured-images__choose",target:"#wdss-featured-images-list input",is_multiple:!0},m={select:"#wdss_jsonld_schema_logo__choose",target:"#wdss-jsonld-schema-logo input",is_multiple:!1};document.addEventListener("DOMContentLoaded",(function(){var f,S,v;i&&(document.querySelectorAll(".wdss-section:not(#wdss-snippets-settings) > .wdss-row").forEach((function(e){e.classList.contains("pinned")||e.classList.add("hidden");var t=e.previousElementSibling,s=t.querySelectorAll(".section-toggler");function c(){t.classList.toggle("active"),e.classList.toggle("hidden")}s&&s.forEach((function(e){e.addEventListener("click",c)}))})),function(){var e=document.querySelectorAll(".wdss-section .section-pin"),t=document.querySelectorAll(".wdss-section:not(#wdss-snippets-settings)");function s(){var e,t,s,c=this.closest(".wdss-section-header"),i=c.closest(".wdss-section").getAttribute("id");(JSON.parse(localStorage.getItem("PINNED_WDS_SECTIONS"))||[]).includes(i)?(this.classList.remove("active"),c.querySelector("h2").classList.remove("pinned"),c.querySelector("i.section-toggler").classList.remove("disabled"),e=i,-1!==(s=(t=JSON.parse(localStorage.getItem("PINNED_WDS_SECTIONS"))||[]).indexOf(e))&&t.splice(s,1),localStorage.setItem("PINNED_WDS_SECTIONS",JSON.stringify(t))):(this.classList.add("active"),c.classList.add("active"),function(e){var t=JSON.parse(localStorage.getItem("PINNED_WDS_SECTIONS"))||[];t.push(e),localStorage.setItem("PINNED_WDS_SECTIONS",JSON.stringify(t))}(i),c.querySelector("h2").classList.add("pinned"),c.querySelector("i.section-toggler").classList.add("disabled"))}!function(){var e;localStorage.getItem("PINNED_WDS_SECTIONS")?e=localStorage.getItem("PINNED_WDS_SECTIONS"):(e=[],localStorage.setItem("PINNED_WDS_SECTIONS",JSON.stringify(e)));var s=e;t.forEach((function(e){var t=e.getAttribute("id"),c=e.querySelector(".wdss-section-header"),i=c.nextElementSibling;s.includes(t)&&(e.classList.add("pinned"),c.querySelector("i.section-pin").classList.add("active"),c.querySelector("i.section-toggler").classList.add("disabled"),c.classList.add("active"),c.querySelector("h2").classList.add("pinned"),i.classList.remove("hidden"))}))}(),e.forEach((function(e){e.addEventListener("click",s)}))}(),wdss_localize.total_post_count>0&&(e(n),e(o),function(){if(document.querySelector("#wdss-get-title")){var e=document.querySelector("#wdss-get-title"),t=document.querySelector("#wdss-title-ending input"),s=wdss_localize.site_title;e.addEventListener("click",(function(){return t.value=s}))}}(),s(p),t(r),t(a),t(u),c()),wdss_localize.is_polylang_exists&&e(l),s(m),t(g),f=document.querySelector("#wdss-advanced-jsonld-schema-condition input"),S=document.querySelector(".wdss-jsonld-schema-predifined-settings"),f.hasAttribute("checked")&&S.classList.add("disabled"),f.addEventListener("click",(function(){S.classList.contains("disabled")?S.classList.remove("disabled"):S.classList.add("disabled")})),e(d),Array.from(document.querySelectorAll('input[type="checkbox"')).forEach((function(e){e.addEventListener("click",(function(){e.hasAttribute("checked")?(e.removeAttribute("checked"),e.value=0,e.checked=!1):(e.setAttribute("checked","checked"),e.checked=!0,e.value=1)}))})),v=Array.from(document.querySelectorAll("#wdss-snippets-settings input")),document.querySelector("#wdss-toggle-options").addEventListener("click",(function(){v[0].hasAttribute("checked")?v.forEach((function(e){e.removeAttribute("checked"),e.checked=!1})):v.forEach((function(e){e.setAttribute("checked","checked"),e.checked=!0}))})),Array.from(document.querySelectorAll(".wdss-setting-item-accordion")).forEach((function(e){var t=e.nextElementSibling;e.addEventListener("click",(function(){t.classList.contains("active")?(e.classList.remove("opened"),t.classList.remove("active")):(e.classList.add("opened"),t.classList.add("active"))}))})))}))})();